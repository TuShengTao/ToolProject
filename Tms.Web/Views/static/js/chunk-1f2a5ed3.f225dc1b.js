(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f2a5ed3","chunk-578a6301","chunk-753702bc","chunk-753702bc"],{"77c6":function(t,e,i){"use strict";i.r(e);var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mytable"},[i("b-container",{attrs:{fluid:""}},[i("b-row",[i("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[i("b-form-group",{staticClass:"mb-0",attrs:{label:"字段搜索",description:"Code/Name/Type/Family/Model/PartNo","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"filterInput"}},[i("b-input-group",{attrs:{size:"sm"}},[i("b-form-input",{attrs:{id:"filterInput",type:"search",placeholder:"请输入搜索的字段值"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.entitySearch()}},model:{value:t.pagination.keyword,callback:function(e){t.$set(t.pagination,"keyword","string"===typeof e?e.trim():e)},expression:"pagination.keyword"}}),t._v(" "),i("b-input-group-append",[t.searchFlag?i("b-button",{on:{click:this.clearKeyWord}},[t._v("\n                  清除\n                ")]):i("b-button",{on:{click:this.entitySearch}},[t._v("\n                  搜索\n                ")])],1)],1)],1)],1),t._v(" "),i("b-col",{staticClass:"my-1",attrs:{sm:"5",md:"6"}},[i("b-form-group",{staticClass:"mb-0",attrs:{label:"每页数量","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm","label-for":"perPageSelect"}},[i("b-form-select",{attrs:{size:"sm",options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),i("b-col",{staticClass:"my-1",attrs:{sm:"5",md:"6"}},["0"==t.componentFlag?i("b-form-group",{staticClass:"mb-0",attrs:{label:"夹具状态","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm","label-for":"perPageSelect12"}},[i("b-form-select",{attrs:{size:"sm",options:t.toolStateOptions},model:{value:t.toolState,callback:function(e){t.toolState=e},expression:"toolState"}})],1):t._e()],1),t._v(" "),i("b-col",{staticClass:"my-1",attrs:{sm:"5",md:"6"}},[i("div",{staticClass:"mybutton-user"},[i("b-button",{staticClass:"mybutton-newuser",attrs:{size:"dm",variant:"primary"},on:{click:this.refresh}},[i("i",{staticClass:"el-icon-refresh"}),t._v("  刷新")])],1)])],1),t._v(" "),i("b-table",{attrs:{busy:t.isBusy,striped:t.striped,bordered:t.bordered,"show-empty":"",small:"",stacked:"md",items:t.items,fields:t.fields,"sort-by":t.sortBy,"sort-direction":t.sortDirection,"sort-desc":t.sortDesc},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"table-busy",fn:function(){return[i("div",{staticClass:"text-center text-danger my-2"},[i("b-spinner",{staticClass:"align-middle"}),t._v(" "),i("strong",[t._v("加载中...")])],1)]},proxy:!0},{key:"cell(index)",fn:function(e){return[i("strong",[t._v(" "+t._s(e.index+1))])]}},{key:"cell(actions)",fn:function(e){return[i("b-button",{attrs:{size:"sm"},on:{click:function(i){return t.itemDetail(e.item,i.target)}}},[t._v("\n            详情\n          ")]),t._v(" "),i("b-button",{directives:[{name:"show",rawName:"v-show",value:"useApply"==t.componentFlag,expression:"componentFlag == 'useApply' "}],staticClass:"mr-1",attrs:{size:"sm",name:"row.item.T_Id"},on:{click:function(i){return t.useApplyButton(e.item,i.target)}}},[t._v("\n            领用\n          ")])]}}])}),t._v(" "),i("div",{staticClass:"myPage",attrs:{align:"center"}},[i("b-col",{staticClass:"my-1",attrs:{sm:"7",md:"6"}},[i("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1),t._v(" "),i("b-modal",{attrs:{id:t.useModal.id,title:t.useModal.title,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-header",fn:function(e){return[i("h4",[t._v(t._s(t.useModal.title))])]}},{key:"modal-footer",fn:function(e){return[t.useFormFlag?t._e():i("b-button",{staticClass:"text-center",attrs:{size:"sm",variant:"primary"},on:{click:function(e){return t.uselastStep()}}},[t._v("\n               上一步\n             ")]),t._v(" "),t.useFormFlag?t._e():i("b-button",{staticClass:"float-center",attrs:{size:"sm",variant:"primary"},on:{click:function(e){return t.useModalOk(e.target)}}},[t._v("\n               确定\n             ")]),t._v(" "),t.useFormFlag?i("b-button",{staticClass:"float-center",attrs:{size:"sm",variant:"primary"},on:{click:function(e){return t.usenextStep()}}},[t._v("\n               下一步\n             ")]):t._e(),t._v(" "),i("b-button",{staticClass:"float-right",attrs:{size:"sm"},on:{click:function(e){return t.modalCancel()}}},[t._v("\n                关闭\n             ")])]}}])},[t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.useFormFlag,expression:"useFormFlag"}]},[i("form",{ref:"form"},[i("b-form-group",{attrs:{"label-for":"classes","label-cols-sm":"2",label:"领用点检:"}},[i("b-form-checkbox-group",{staticClass:"mb-3",attrs:{options:t.checkItemOptions,"value-field":"value","text-field":"text","disabled-field":"notEnabled"},model:{value:t.checkItemSelected,callback:function(e){t.checkItemSelected=e},expression:"checkItemSelected"}}),t._v(" "),i("span",{staticStyle:{"font-size":"12.8px"}},[t._v("如果夹具有上述问题请勾选！")])],1),t._v(" "),i("b-form-group",{attrs:{"label-for":"classesM","label-cols-sm":"2",label:"点检图片:"}},[i("el-upload",{ref:"uploadCheck",staticClass:"upload-demo",attrs:{action:"","on-preview":t.handlePreviewApply,"http-request":t.uploadCheckImgApply,"on-remove":t.handleRemoveApply,"file-list":t.checkFileList,"list-type":"picture",multiple:!0,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"medium",type:"primary"},slot:"trigger"},[t._v("选择图片")]),t._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"medium",type:"success"},on:{click:t.submitCheckUpload}},[t._v("上传图片")])],1),t._v(" "),i("span",{staticStyle:{"font-size":"12.8px"}},[t._v("如果夹具有上述问题请上传图片！")])],1)],1)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.useFormFlag,expression:"!useFormFlag"}]},[i("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.useHandleSubmit(e)}}},[i("b-form-group",{attrs:{description:"",label:"经手人:","label-for":"person","invalid-feedback":t.invalidUseHander,"label-cols-sm":"2",state:t.useHanderState}},[i("b-form-input",{attrs:{id:"person",state:t.useHanderState,trim:""},model:{value:t.useEntity.T_Hander,callback:function(e){t.$set(t.useEntity,"T_Hander",e)},expression:"useEntity.T_Hander"}})],1),t._v(" "),i("b-form-group",{attrs:{"label-for":"line","label-cols-sm":"2",label:"生产线:","invalid-feedback":t.invalidLine,state:t.lineState}},[i("b-form-select",{attrs:{id:"line",state:t.lineState,options:t.lineList},model:{value:t.useEntity.T_ProductLineId,callback:function(e){t.$set(t.useEntity,"T_ProductLineId",e)},expression:"useEntity.T_ProductLineId"}})],1),t._v(" "),i("b-form-group",{attrs:{"label-for":"classes","label-cols-sm":"2",label:"班次:","invalid-feedback":t.invalidClasses,state:t.classesState}},[i("b-form-select",{attrs:{id:"classes",state:t.classesState,options:t.classesOptions},model:{value:t.useEntity.T_Classes,callback:function(e){t.$set(t.useEntity,"T_Classes",e)},expression:"useEntity.T_Classes"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"备注:","label-for":"desc","label-cols-sm":"2"}},[i("b-form-input",{attrs:{id:"desc",trim:""},model:{value:t.useEntity.T_Description,callback:function(e){t.$set(t.useEntity,"T_Description",e)},expression:"useEntity.T_Description"}})],1)],1)])]),t._v(" "),i("b-modal",{attrs:{id:t.detailModal.id,title:"夹具详情:",scrollable:"","hide-footer":""}},[i("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.useHandleSubmit(e)}}},[i("b-form-group",{attrs:{description:"",label:"夹具代码:","label-for":"person","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"person",trim:""},model:{value:t.entityDetail.T_Code,callback:function(e){t.$set(t.entityDetail,"T_Code",e)},expression:"entityDetail.T_Code"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"序列号:","label-for":"seqid","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"seqid",trim:""},model:{value:t.entityDetail.T_SeqId,callback:function(e){t.$set(t.entityDetail,"T_SeqId",e)},expression:"entityDetail.T_SeqId"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"夹具名称:","label-for":"name","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"name",trim:""},model:{value:t.entityDetail.T_Name,callback:function(e){t.$set(t.entityDetail,"T_Name",e)},expression:"entityDetail.T_Name"}})],1),t._v(" "),i("b-form-group",{attrs:{"label-for":"type3","label-cols-sm":"3",label:"夹具类别:"}},[i("b-form-select",{attrs:{id:"type3",options:t.typeList},model:{value:t.entityDetail.T_ToolType,callback:function(e){t.$set(t.entityDetail,"T_ToolType",e)},expression:"entityDetail.T_ToolType"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"所属大类:","label-for":"F","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"F",trim:""},model:{value:t.entityDetail.T_Family,callback:function(e){t.$set(t.entityDetail,"T_Family",e)},expression:"entityDetail.T_Family"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"夹具模组:","label-for":"model","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"model",trim:""},model:{value:t.entityDetail.T_Model,callback:function(e){t.$set(t.entityDetail,"T_Model",e)},expression:"entityDetail.T_Model"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"夹具料号:","label-for":"partno","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"partno",trim:""},model:{value:t.entityDetail.T_PartNo,callback:function(e){t.$set(t.entityDetail,"T_PartNo",e)},expression:"entityDetail.T_PartNo"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"夹具库位:","label-for":"L","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"L",trim:""},model:{value:t.entityDetail.T_Location,callback:function(e){t.$set(t.entityDetail,"T_Location",e)},expression:"entityDetail.T_Location"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"生产日期:","label-for":"PD","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"PD",trim:""},model:{value:t.entityDetail.T_ToolProductedDate,callback:function(e){t.$set(t.entityDetail,"T_ToolProductedDate",e)},expression:"entityDetail.T_ToolProductedDate"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"建档日期:","label-for":"tct","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"tct",trim:""},model:{value:t.entityDetail.T_CreatorTime,callback:function(e){t.$set(t.entityDetail,"T_CreatorTime",e)},expression:"entityDetail.T_CreatorTime"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"入库日期:","label-for":"regdata","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"regdata",trim:""},model:{value:t.entityDetail.T_RegDate,callback:function(e){t.$set(t.entityDetail,"T_RegDate",e)},expression:"entityDetail.T_RegDate"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"采购单据号:","label-for":"B","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"B",trim:""},model:{value:t.entityDetail.T_BillNo,callback:function(e){t.$set(t.entityDetail,"T_BillNo",e)},expression:"entityDetail.T_BillNo"}})],1),t._v(" "),i("b-form-group",{attrs:{"label-for":"toolstate","label-cols-sm":"3",label:"夹具状态:"}},[i("b-form-select",{attrs:{id:"toolstate",options:t.toolStateList},model:{value:t.entityDetail.T_ToolStatus,callback:function(e){t.$set(t.entityDetail,"T_ToolStatus",e)},expression:"entityDetail.T_ToolStatus"}})],1),t._v(" "),i("b-form-group",{attrs:{"label-for":"toolcount","label-cols-sm":"3",label:"维修次数:"}},[i("b-form-input",{attrs:{id:"toolcount"},model:{value:t.entityDetail.T_RepairedCounts,callback:function(e){t.$set(t.entityDetail,"T_RepairedCounts",e)},expression:"entityDetail.T_RepairedCounts"}})],1),t._v(" "),i("b-form-group",{attrs:{"label-for":"toolcount","label-cols-sm":"3",label:"使用次数:"}},[i("b-form-input",{attrs:{id:"toolcount"},model:{value:t.entityDetail.T_UsedCount,callback:function(e){t.$set(t.entityDetail,"T_UsedCount",e)},expression:"entityDetail.T_UsedCount"}})],1),t._v(" "),i("b-form-group",{attrs:{"label-for":"tooltime","label-cols-sm":"3",label:"使用时间:"}},[i("b-form-input",{attrs:{id:"tooltime"},model:{value:t.entityDetail.T_UsedTime,callback:function(e){t.$set(t.entityDetail,"T_UsedTime",e)},expression:"entityDetail.T_UsedTime"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"经办人:","label-for":"H","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"H",trim:""},model:{value:t.entityDetail.T_Hander,callback:function(e){t.$set(t.entityDetail,"T_Hander",e)},expression:"entityDetail.T_Hander"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"夹具图片:","label-for":"H","label-cols-sm":"3"}},t._l(t.imgSrcList,(function(e,l){return i("el-image",{staticStyle:{width:"100px",height:"68px","padding-right":"5px"},attrs:{src:t.imgSrcList[l],"preview-src-list":t.imgSrcList}})})),1)],1)]),t._v(" "),i("b-modal",{attrs:{id:t.entityModel.id,title:t.entityModel.title,okTitle:"确定",cancelTitle:"取消","no-close-on-backdrop":!0,"no-close-on-esc":!0},on:{cancel:t.modalCancel,ok:t.modalOk},scopedSlots:t._u([{key:"modal-header",fn:function(e){return[i("h4",[t._v(t._s(t.entityModel.title))])]}}])},[t._v(" "),i("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},["修改实体"!=this.entityModel.title?i("b-form-group",{attrs:{description:"",label:"夹具代码:","label-for":"code2","invalid-feedback":t.invalidCode,"label-cols-sm":"2",state:t.codeState}},[i("b-form-input",{attrs:{id:"code2",state:t.codeState,trim:""},model:{value:t.toolEntity.T_Code,callback:function(e){t.$set(t.toolEntity,"T_Code",e)},expression:"toolEntity.T_Code"}})],1):t._e(),t._v(" "),i("b-form-group",{attrs:{"label-for":"type2","label-cols-sm":"2",label:"夹具类型:","invalid-feedback":t.invalidType,state:t.typeState}},[i("b-form-select",{attrs:{id:"type2",state:t.typeState,options:t.typeList},model:{value:t.toolEntity.T_ToolType,callback:function(e){t.$set(t.toolEntity,"T_ToolType",e)},expression:"toolEntity.T_ToolType"}})],1),t._v(" "),"修改实体"!=this.entityModel.title?i("b-form-group",{attrs:{description:"",label:"采购单据号:","label-for":"billNo2","invalid-feedback":t.invalidBillNo,"label-cols-sm":"2",state:t.billNoState}},[i("b-form-input",{attrs:{id:"billNo2",state:t.billNoState,trim:""},model:{value:t.toolEntity.T_BillNo,callback:function(e){t.$set(t.toolEntity,"T_BillNo",e)},expression:"toolEntity.T_BillNo"}})],1):t._e(),t._v(" "),i("b-form-group",{attrs:{description:"",label:"存放库位:","label-for":"location2","invalid-feedback":t.invalidLocation,"label-cols-sm":"2",state:t.locationState}},[i("b-form-input",{attrs:{id:"location2",state:t.locationState,trim:""},model:{value:t.toolEntity.T_Location,callback:function(e){t.$set(t.toolEntity,"T_Location",e)},expression:"toolEntity.T_Location"}})],1),t._v(" "),"修改实体"!=this.entityModel.title?i("b-form-group",{attrs:{description:"",label:"经手人:","label-for":"Hander2","invalid-feedback":t.invalidHander,"label-cols-sm":"2",state:t.HanderState}},[i("b-form-input",{attrs:{id:"Hander2",state:t.HanderState,trim:""},model:{value:t.toolEntity.T_Hander,callback:function(e){t.$set(t.toolEntity,"T_Hander",e)},expression:"toolEntity.T_Hander"}})],1):t._e(),t._v(" "),i("b-form-group",{attrs:{"label-for":"Define2","label-cols-sm":"2",label:"夹具名称:","invalid-feedback":t.invalidDefine,state:t.DefineState}},[i("b-form-select",{attrs:{id:"Define2",state:t.DefineState,options:t.defineList},model:{value:t.toolEntity.T_DefineId,callback:function(e){t.$set(t.toolEntity,"T_DefineId",e)},expression:"toolEntity.T_DefineId"}})],1),t._v(" "),"修改实体"!=this.entityModel.title?i("b-form-group",{attrs:{description:"",label:"夹具生产日期:","label-for":"ProductedDate2","invalid-feedback":t.invalidProductedDate,"label-cols-sm":"2",state:t.ProductedDateState}},[i("b-form-input",{attrs:{id:"ProductedDate2",state:t.ProductedDateState,trim:""},model:{value:t.toolEntity.T_ToolProductedDate,callback:function(e){t.$set(t.toolEntity,"T_ToolProductedDate",e)},expression:"toolEntity.T_ToolProductedDate"}})],1):t._e()],1)])],1),t._v(" "),i("el-backtop",{attrs:{target:""}})],1)},a=[],n=(i("28a5"),i("96cf"),i("3b8d")),o=(i("ac4d"),i("8a81"),i("ac6a"),i("5df3"),i("f400"),i("6b54"),i("c5d1")),s=i("7b3c"),r=i("5c96"),u=i("e8cb"),c={props:{componentFlag:{type:String,default:"0"}},data:function(){return{toolState:"所有状态",toolStateOptions:["所有状态","未出库","已出库","维修中","已废弃","报修申请中","报废申请中","采购入库申请中"],useCheckFlag:!1,repairEntity:{T_Id:null,T_Img:null,T_Description:""},checkToolEntity:null,checkUploadFlag:!1,checkImgArray:[],checkFileList:[],checkEntity:{T_LastCheckTime:null,T_Id:null,T_CheckDetails:null,T_CheckType:null,T_Description:null,T_CheckedImg:null},useFormFlag:!0,checkItemSelected:[],checkItemOptionsBbbbbb:[{text:"是否有螺丝松动情况",value:"id1",result:"no"},{text:"是否有部件损坏",value:"id2",result:"no"},{text:"是否有钢套损坏掉落",value:"id3",result:"no"},{text:"是否有机械部件松动",value:"id4",result:"no"},{text:"是否有不正常的响声",value:"id5",result:"no"},{text:"电路是否正常工作",value:"id6",result:"no"}],checkItemOptions:[],defineList:[],typeList:[],typeMap:null,mapType:null,imgSrcList:[],toolStateList:[{text:"已报废",value:-1},{text:"维修中",value:0},{text:"未出库",value:1},{text:"已出库",value:2},{text:"报废申请中",value:3},{text:"报修申请中",value:4},{text:"采购入库申请中",value:5}],useEntity:{T_Id:null,T_Hander:"",T_ProductLineId:null,T_Description:null,T_Classes:null},useHanderStateFlag:null,useLineStateFlag:null,classesStateFlag:null,isBusy:!0,searchField:"",fieldOptions:["夹具代码","夹具名称","夹具模组","夹具料号","夹具大类"],classesOptions:[{text:"夜班",value:"夜班"},{text:"白班",value:"白班"}],mapDepartment:null,mapLine:null,lineMap:null,departmentList:[],lineList:[],keynumber:null,keyvalue:null,keycode:null,keyseqid:null,userUpdata:null,codeStateFlag:null,typeStateFlag:null,billNoStateFlag:null,locationStateFlag:null,ToolStatusStateFlag:null,HanderStateFlag:null,RepairedCountsStateFlag:null,DefineStateFlag:null,ProductedDateStateFlag:null,IsDeleteStateFlag:null,departmentStateFlag:null,userT_Code:"",toolEntity:{T_Code:"",T_ToolType:null,T_BillNo:null,T_Location:null,T_ToolStatus:null,T_Hander:null,T_RepairedCounts:null,T_DefineId:null,T_ToolProductedDate:null,T_IsDelete:null,T_DepartmentId:null},submitFormFlag:null,groupState:null,searchFlag:!1,totalRows:1,currentPage:1,perPage:10,pageOptions:[5,10,15,20,30],sortBy:null,sortDesc:!1,sortDirection:"asc",pagination:{sord:"desc",page:1,rows:10,sidx:"T_RegDate",keyword:null,searchType:666},itemsSelected:[],organizeMap:null,items:[],itemsBackUp:[],fieldsName:null,fields:[{key:"index",label:"序号"},{key:"T_Code",label:"夹具代码",sortable:!0},{key:"T_SeqId",label:"序列号",sortable:!0},{key:"T_Name",label:"夹具名称",sortable:!1},{key:"T_ToolType",label:"夹具类别",sortable:!1},{key:"T_Location",label:"库位"},{key:"T_Hander",label:"经办人"},{key:"T_ToolStatus",label:"状态",formatter:function(t,e,i){return-1==t?t="已报废":0==t?t="维修中":1==t?t="未出库":2==t?t="已出库":3==t?t="报废申请中":4==t?t="报修申请中":5==t&&(t="采购入库申请中"),t}},{key:"T_UsedCount",label:"使用次数",sortable:!0},{key:"T_UsedTime",label:"使用时间(秒)",sortable:!0},{key:"T_RepairedCounts",label:"维修次数",sortable:!0},{key:"actions",label:"操作"}],striped:!0,bordered:!0,entityModel:{id:"info-modal",title:"",content:""},useModal:{id:"use-modal",title:"",content:""},detailModal:{id:"detail-modal",title:"夹具详情:",content:""},entityDetail:{T_Code:null,T_SeqId:null,T_ToolType:null,T_ToolStatus:null,T_Id:null,T_Img:null,T_Hander:null,T_RecPersonId:null,T_BillNo:null,T_Location:null,T_UsedCount:null,T_UsedTime:null,T_RegDate:null,T_IsPassBuyToW:null,T_RepairedCounts:null,T_DefineId:null,T_ToolProductedDate:null,T_CreatorTime:null,T_DepartmentId:null,T_IsDelete:null,T_Name:null,T_Family:null,T_Model:null,T_PartNo:null,checkItemMap:null}}},watch:{toolState:function(){this.getList()},perPage:function(){this.pagination.rows=this.perPage,this.getList()},currentPage:function(){this.pagination.page=this.currentPage,this.getList()},sortBy:function(){null!=this.sortBy&&""!=this.sortBy&&(this.pagination.sidx=this.sortBy,this.getList(),Object(r["Message"])({message:"查询根据"+this.sortBy+"排序！",type:"success",duration:5e3}))},sortDesc:function(){0==this.sortDesc?this.pagination.sord="desc":this.pagination.sord="asc",this.getList(),Object(r["Message"])({message:"查询根据"+this.sortBy+"的"+this.pagination.sord+"排序！",type:"success",duration:5e3})}},created:function(){this.setFieldsName(),this.getLineList(),this.getTypeList()},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))},codeState:function(){var t=/^[A-Z]{2}[0-9]{4}$/;return this.codeStateFlag=t.test(this.toolEntity.T_Code),this.codeStateFlag},typeState:function(){var t=/[\u4e00-\u9fa5]/;return this.typeStateFlag=t.test(this.toolEntity.T_ToolType),this.typeStateFlag},billNoState:function(){return null!=this.toolEntity.T_BillNo?this.billNoStateFlag=!0:this.billNoStateFlag=!1,this.billNoStateFlag},locationState:function(){var t=/^[0-9]{2}-[A-Z][0-9]/;return this.locationStateFlag=t.test(this.toolEntity.T_Location),this.locationStateFlag},ToolStatusState:function(){var t=/^[0-9\-]{1,2}/;return this.ToolStatusStateFlag=t.test(this.toolEntity.T_ToolStatus),this.ToolStatusStateFlag},HanderState:function(){var t=/[\u4e00-\u9fa5]/;return this.HanderStateFlag=t.test(this.toolEntity.T_Hander),this.HanderStateFlag},useHanderState:function(){var t=/[\u4e00-\u9fa5]/;return this.useHanderStateFlag=t.test(this.useEntity.T_Hander),this.useHanderStateFlag},DefineState:function(){return this.DefineStateFlag=null!=this.toolEntity.T_DefineId,this.DefineStateFlag},lineState:function(){return this.useLineStateFlag=null!=this.useEntity.T_ProductLineId,this.useLineStateFlag},classesState:function(){return this.classesStateFlag=null!=this.useEntity.T_Classes,this.classesStateFlag},ProductedDateState:function(){var t=/^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}$/;return this.ProductedDateStateFlag=t.test(this.toolEntity.T_ToolProductedDate),this.ProductedDateStateFlag},invalidCode:function(){return this.codeStateFlag?"":"前2英文后4数字"},invalidType:function(){return this.typeStateFlag?"":"输入中文字的类型"},invalidBillNo:function(){return this.billNoStateFlag?"":"不可为空"},invalidLocation:function(){return this.locationStateFlag?"":"请输入正确的位置格式"},invalidToolStatus:function(){return this.ToolStatusStateFlag?"":"0：维修中、1：未出库、2：已出库 、-1：已废弃"},invalidHander:function(){return this.HanderStateFlag?"":"请输入中文经手人姓名"},invalidDefine:function(){return this.DefineStateFlag?"":"请选择一个选项"},invalidProductedDate:function(){return this.ProductedDateStateFlag?"":"请输入生产日期YYYY-MM-dd"},invalidLine:function(){return this.useLineStateFlag?"":"不可为空"},invalidClasses:function(){return this.classesStateFlag?"":"不可为空"},invalidUseHander:function(){return this.useHanderStateFlag?"":"请输入中文经手人姓名"}},mounted:function(){},methods:{repairApply:function(){var t=this,e={repairEntity:null};this.repairEntity.T_Id=this.checkToolEntity.T_Id,this.repairEntity.T_Img=this.checkImgArray.toString(),this.repairEntity.T_Description="领用出库点检时发起的维修申请",e.repairEntity=this.repairEntity,Object(u["b"])(e).then((function(e){t.insertToCheck(),t.$bvModal.hide(t.useModal.id)}))},getCheckItems:function(t){var e=this;Object(u["d"])(t).then((function(t){e.checkItemOptions=[];var i=new Map,l=!0,a=!1,n=void 0;try{for(var o,s=t[Symbol.iterator]();!(l=(o=s.next()).done);l=!0){var r=o.value,u={text:"",value:"",result:"no"};i.set(r.Id,r.T_CheckItemName),u.text=r.T_CheckItemName,u.value=r.Id,e.checkItemOptions.push(u)}}catch(c){a=!0,n=c}finally{try{l||null==s.return||s.return()}finally{if(a)throw n}}e.checkItemMap=i}))},submitCheckUpload:function(){this.$refs.uploadCheck.submit()},handleRemoveApply:function(t,e){},handlePreviewApply:function(t){},uploadCheckImgApply:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i,l=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new FormData,i.append("file",e.file),t.next=4,Object(o["a"])(i).then((function(t){l.checkUploadFlag=!0,l.checkImgArray.push(t.data[0]),Object(r["Message"])({message:t.message,type:t.state,duration:5e3})}));case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),insertToCheck:function(){var t=this,e={checkEntity:null};this.checkEntity.T_Id=this.checkToolEntity.T_Id,this.checkEntity.T_CheckType=1,this.checkEntity.T_CheckedImg=this.checkImgArray.toString(),this.checkEntity.T_Description="领用出库点检",this.checkEntity.T_LastCheckTime=this.checkToolEntity.T_LastCheckTime;var i=[];if(this.checkItemSelected.length>0)for(var l={text:null,value:null,result:null},a=0;a<this.checkItemSelected.length;a++)l.text=this.checkItemMap.get(this.checkItemSelected[a]),l.value=this.checkItemSelected[a],l.result="yes",i.push(JSON.stringify(l));this.checkEntity.T_CheckDetails=i.toString(),e.checkEntity=this.checkEntity,Object(u["a"])(e).then((function(e){t.useCheckFlag=!0}))},uselastStep:function(){this.useFormFlag=!0},usenextStep:function(){this.checkItemSelected.length>0?this.checkUploadFlag?this.useShowMsgBox("将对此夹具发起报修申请,是否继续?"):Object(r["Message"])({message:"未上传点检存在问题的夹具图片!",type:"warning",duration:5e3}):(this.useCheckFlag||(this.insertToCheck(),this.useModal.title="领用申请"),this.useFormFlag=!1)},useShowMsgBox:function(t){var e=this;this.$bvModal.msgBoxConfirm(t,{title:"提示",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"确定",cancelTitle:"取消",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(t){1==t&&e.repairApply()})).catch((function(t){}))},getTypeList:function(){var t=this;Object(s["e"])().then((function(e){var i=new Map,l=new Map;t.typeMap=new Map,t.mapType=new Map;var a=!0,n=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var u=s.value,c={text:null,value:null};c.text=u.T_TypeName,c.value=u.T_Id,i.set(u.T_Id,u.T_TypeName),l.set(u.T_TypeName,u.T_Id),t.typeList.push(c)}}catch(d){n=!0,o=d}finally{try{a||null==r.return||r.return()}finally{if(n)throw o}}t.mapType=l,t.typeMap=i,t.getList()}))},itemDetail:function(t,e){this.entityDetail=JSON.parse(JSON.stringify(t)),this.entityDetail.T_ToolType=this.mapType.get(this.entityDetail.T_ToolType),null!=this.entityDetail.T_Img&&""!=this.entityDetail.T_Img?this.imgSrcList=this.entityDetail.T_Img.split(","):this.imgSrcList=[],this.$root.$emit("bv::show::modal",this.detailModal.id,e)},handleSubmit:function(){return"修改实体"==this.entityModel.title?!(!this.typeStateFlag||!this.locationStateFlag)||void 0:!!(this.codeStateFlag&&this.typeStateFlag&&this.billNoStateFlag&&this.locationStateFlag&&this.HanderStateFlag&&this.DefineStateFlag&&this.ProductedDateStateFlag)||void 0},useHandleSubmit:function(){return!!(this.useHanderStateFlag&&this.useLineStateFlag&&this.classesStateFlag)},useApplyButton:function(t,e){this.useCheckFlag=!1,this.checkToolEntity=JSON.parse(JSON.stringify(t)),this.getCheckItems(this.mapType.get(t.T_ToolType)),this.useModal.title="领用点检:",this.useEntity.T_Id=t.T_Id,this.$root.$emit("bv::show::modal",this.useModal.id,e)},useApply:function(){var t=this,e={useEntity:null};e.useEntity=this.useEntity,Object(s["a"])(e).then((function(e){t.refresh(),t.$bvModal.hide(t.useModal.id),Object(r["Message"])({message:e.message,type:e.state,duration:5e3})}))},updateEntityButton:function(t,e,i){this.toolEntity=JSON.parse(JSON.stringify(t)),this.toolEntity.T_DepartmentId=this.mapDepartment.get(t.T_DepartmentId),this.toolEntity.T_DefineId=this.mapDefine.get(t.T_DefineId),this.entityModel.title="修改实体",this.$root.$emit("bv::show::modal",this.entityModel.id,i)},insertEntityButton:function(t){this.toolEntity.T_Code="",this.toolEntity.T_ToolType=null,this.toolEntity.T_BillNo=null,this.toolEntity.T_Location="",this.toolEntity.T_ToolStatus=null,this.toolEntity.T_Hander=null,this.toolEntity.T_RepairedCounts=null,this.toolEntity.T_DefineId=null,this.toolEntity.T_ToolProductedDate=null,this.toolEntity.T_IsDelete=null,this.toolEntity.T_DepartmentId=null,this.entityModel.title="新建实体",this.$root.$emit("bv::show::modal",this.entityModel.id,t)},insertEntity:function(){var t=this;Object(s["f"])(this.toolEntity.T_Code).then((function(e){if(null!=e){if(1==e[0].T_IsDelete){var i=e.length,l=Math.floor(Math.random()*(i-0))+0;t.keyvalue=e[l].T_Id,t.keycode=e[l].T_Code,t.keyseqid=e[l].T_SeqId}else t.keynumber=e.length+1;t.submitEntityForm()}else t.submitEntityForm()}))},updateEntity:function(){this.submitEntityForm()},submitEntityForm:function(){var t=this,e={toolEntity:null,keyValue:null,keyNumber:null,keyCode:null,keySeqId:null};e.toolEntity=this.toolEntity,"修改实体"==this.entityModel.title?(e.keyValue=this.toolEntity.T_Id,e.keyCode=this.toolEntity.T_Code,e.keySeqId=this.toolEntity.T_SeqId):null!=this.keynumber?e.keyNumber=this.keynumber.toString():null!=this.keyvalue&&(e.keyValue=this.keyvalue,e.keyCode=this.keycode,e.keySeqId=this.keyseqid.toString()),Object(s["i"])(e).then((function(e){"success"==e.state?(t.$nextTick((function(){t.$bvModal.hide(t.entityModel.id)})),t.refresh(),Object(r["Message"])({message:e.message,type:"success",duration:5e3})):Object(r["Message"])({message:"操作失败！",type:"warning",duration:5e3})}))},modalCancel:function(){this.$bvModal.hide(this.detailModal.id),this.$bvModal.hide(this.useModal.id)},useModalCancel:function(){this.useEntity.T_Id=null,this.useEntity.T_Description=null,this.useEntity.T_Hander="",this.useEntity.T_Classes=null},modalOk:function(t){t.preventDefault(),this.handleSubmit()&&("修改实体"==this.entityModel.title?this.showMsgBox("请确认是否修改此实体！"):this.showMsgBox("请确认是否添加此实体！"))},useModalOk:function(t){this.useHandleSubmit()&&this.showMsgBox("请确认是否继续领用此夹具！",null,"useApply")},showMsgBox:function(t,e,i){var l=this;this.$bvModal.msgBoxConfirm(t,{title:"提示",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"确定",cancelTitle:"取消",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(t){1==t&&("deleteone"==i?l.deleteEntity(e):"batchDelete"==i?l.deleteEntitys():"useApply"==i?l.useApply():l.updateEntity())})).catch((function(t){}))},deleteEntityButton:function(t){var e="此操作将永久删除该实体, 是否继续?",i="deleteone";this.showMsgBox(e,t,i)},deleteEntitysButton:function(){if(this.itemsSelected.length>0){var t="此操作将永久删除这"+this.itemsSelected.length+"实体, 是否继续?",e="batchDelete";this.showMsgBox(t,"",e)}else Object(r["Message"])({message:"您未勾选实体！",type:"warning",duration:5e3})},deleteEntity:function(t){var e=this;Object(s["g"])(t.T_Id).then((function(t){"success"==t.state&&(e.refresh(),Object(r["Message"])({message:t.message,type:"success",duration:5e3}))}))},deleteEntitys:function(){var t=this;Object(s["h"])(this.itemsSelected).then((function(e){"success"==e.state&&(t.refresh(),t.itemsSelected=[],Object(r["Message"])({message:e.message,type:"success",duration:5e3}))}))},clearKeyWord:function(){this.pagination.keyword=null,this.searchFlag=!1,this.refresh()},refresh:function(){this.getList()},entitySearch:function(){this.searchFlag=!0,""!=this.pagination.keyword&&null!=this.pagination.keyword?this.getList():(this.searchFlag=!1,Object(r["Message"])({message:"搜索字段不能为空！",type:"warning",duration:5e3}))},onRowSelected:function(t){var e=this.itemsSelected.indexOf(t.T_Id);-1==e?this.itemsSelected.push(t.T_Id):this.itemsSelected.splice(e,1)},judgeValue:function(t){return!0===t?(t="是",t):!1===t?(t="否",t):null!=t&&""!=t&&""!=t?t:void(t="空")},getLineList:function(){var t=this;Object(s["d"])().then((function(e){var i=new Map,l=new Map;t.lineMap=new Map,t.mapLine=new Map;var a=!0,n=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var u=s.value,c={text:null,value:null};c.text=u.T_LineName,c.value=u.T_Id,i.set(u.T_Id,u.T_LineName),l.set(u.T_LineName,u.T_Id),t.lineList.push(c)}}catch(d){n=!0,o=d}finally{try{a||null==r.return||r.return()}finally{if(n)throw o}}t.mapLine=l,t.lineMap=i}))},setFieldsName:function(){this.fieldsName=new Map([["T_Code","夹具代码"],["T_SeqId","夹具序列号"],["T_Name","夹具名称"],["T_ToolType","夹具类别"],["T_Hander","经办人"],["T_ToolProductedDate","生产日期"],["T_RegDate","入库日期"],["T_UsedCount","已使用次数"],["T_RepairedCounts","维修次数"],["T_Location","存放库位"],["T_BillNo","采购单据号"],["T_IsDelete","删除否"],["T_ToolStatus","夹具状态"],["T_DepartmentId","部门"]])},getList:function(){var t=this;this.isBusy=!0,this.itemsSelected=[],this.items=null;var e=null;"0"==this.componentFlag&&("维修中"==this.toolState?this.pagination.searchType=0:"未出库"==this.toolState?this.pagination.searchType=1:"已出库"==this.toolState?this.pagination.searchType=2:"已废弃"==this.toolState?this.pagination.searchType=-1:"报废申请中"==this.toolState?this.pagination.searchType=3:"报修申请中"==this.toolState?this.pagination.searchType=4:"采购入库申请中"==this.toolState?this.pagination.searchType=5:"所有状态"==this.toolState&&(this.pagination.searchType=666)),"useApply"==this.componentFlag&&(this.pagination.searchType=1),Object(s["b"])(this.pagination).then((function(i){e=i.rows,t.itemsBackUp=i.rows;for(var l=0;l<e.length;l++)e[l].T_ToolType=t.typeMap.get(e[l].T_ToolType);t.totalRows=i.records,t.items=e,t.isBusy=!1}))}}},d=c,p=(i("d3a6"),i("2877")),m=Object(p["a"])(d,l,a,!1,null,null,null);e["default"]=m.exports},"7b3c":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"g",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"f",(function(){return s})),i.d(e,"h",(function(){return r})),i.d(e,"i",(function(){return u})),i.d(e,"d",(function(){return c})),i.d(e,"e",(function(){return d})),i.d(e,"a",(function(){return p}));var l=i("b775");function a(t){return Object(l["a"])({url:"/ToolManage/Entity/GetGridJson",method:"get",params:t})}function n(t){return Object(l["a"])({url:"/ToolManage/Entity/DeleteForm",method:"get",params:{keyValue:t}})}function o(t){return Object(l["a"])({url:"/ToolManage/Define/getFormByCode",method:"get",params:{code:t}})}function s(t){return Object(l["a"])({url:"/ToolManage/Entity/GetFormByCode",method:"get",params:{code:t}})}function r(t){return Object(l["a"])({url:"/ToolManage/Entity/BatchDeleteForm",method:"post",data:t})}function u(t){return Object(l["a"])({url:"/ToolManage/Entity/InsertToWareHouse",method:"post",data:t})}function c(){return Object(l["a"])({url:"/ToolManage/Line/Get",method:"get"})}function d(){return Object(l["a"])({url:"/ToolManage/Type/Get",method:"get"})}function p(t){return Object(l["a"])({url:"/ToolManage/Entity/UseUpdateInsert",method:"post",data:t})}},baf8:function(t,e,i){},c5d1:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var l=i("b775");function a(t){return Object(l["a"])({url:"/Upload/UploadImg",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}})}},d3a6:function(t,e,i){"use strict";var l=i("baf8"),a=i.n(l);a.a},e8cb:function(t,e,i){"use strict";i.d(e,"d",(function(){return a})),i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"f",(function(){return r})),i.d(e,"e",(function(){return u})),i.d(e,"g",(function(){return c}));var l=i("b775");function a(t){return Object(l["a"])({url:"/ToolManage/Check/GetCheckItems",method:"get",params:{typeId:t}})}function n(t){return Object(l["a"])({url:"/ToolManage/Check/Insert",method:"post",data:t})}function o(t){return Object(l["a"])({url:"/ToolManage/Entity/RepairUpdateInsert",method:"post",data:t})}function s(t){return Object(l["a"])({url:"/ToolManage/Check/GetGridJson",method:"get",params:t})}function r(){return Object(l["a"])({url:"/ToolManage/Type/Get",method:"get"})}function u(){return Object(l["a"])({url:"/SystemManage/Organize/GetGridJson",method:"get"})}function c(){return Object(l["a"])({url:"/SystemManage/User/GetAllUser",method:"get"})}},f400:function(t,e,i){"use strict";var l=i("c26b"),a=i("b39a"),n="Map";t.exports=i("e0b8")(n,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=l.getEntry(a(this,n),t);return e&&e.v},set:function(t,e){return l.def(a(this,n),0===t?0:t,e)}},l,!0)}}]);