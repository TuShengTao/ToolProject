(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b8ef43ba"],{"4e8f":function(t,e,i){"use strict";var a=i("e1ff"),n=i.n(a);n.a},b022:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mytable"},[i("b-container",{attrs:{fluid:""}},[i("b-row",[i("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[i("b-form-group",{staticClass:"mb-0",attrs:{label:"字段搜索","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"filterInput"}},[i("b-input-group",{attrs:{size:"sm"}},[i("b-form-input",{attrs:{type:"search",placeholder:"夹具代码/夹具名称"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.userSearch()}},model:{value:t.pagination.keyword,callback:function(e){t.$set(t.pagination,"keyword",e)},expression:"pagination.keyword"}}),t._v(" "),i("b-input-group-append",[t.searchFlag?i("b-button",{on:{click:this.clearKeyWord}},[t._v("\n                   清除\n                 ")]):i("b-button",{on:{click:this.userSearch}},[t._v("\n                   搜索\n                 ")])],1)],1)],1)],1),t._v(" "),i("b-col",{staticClass:"my-1",attrs:{sm:"5",md:"6"}},[i("b-form-group",{staticClass:"mb-0",attrs:{label:"每页数量","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm","label-for":"perPageSelect"}},[i("b-form-select",{attrs:{size:"sm",options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),i("b-col",{staticClass:"my-1",attrs:{sm:"5",md:"6"}}),t._v(" "),i("b-col",{staticClass:"my-1",attrs:{sm:"5",md:"6"}},[i("div",{staticClass:"mybutton-user"},[i("b-button",{staticClass:"mybutton-newuser",attrs:{size:"dm",variant:"primary"},on:{click:this.refresh}},[i("i",{staticClass:"el-icon-refresh"}),t._v("  刷新")]),t._v(" "),i("b-button",{staticClass:"mybutton-newuser",attrs:{size:"dm",variant:"primary"},on:{click:function(e){return t.insertDefineButton(e.target)}}},[i("i",{staticClass:"el-icon-plus"}),t._v("  新建定义")]),t._v(" "),i("b-button",{attrs:{size:"dm",variant:"primary"},on:{click:function(e){return t.deleteDefinesButton()}}},[i("i",{staticClass:"el-icon-delete"}),t._v("  删除定义")])],1)])],1),t._v(" "),i("b-table",{attrs:{busy:t.spinFlag,striped:t.striped,bordered:t.bordered,"show-empty":"",small:"",stacked:"md",items:t.items,fields:t.fields,"sort-by":t.sortBy,"sort-direction":t.sortDirection,"sort-desc":t.sortDesc},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"table-busy",fn:function(){return[i("div",{staticClass:"text-center text-danger my-2"},[i("b-spinner",{staticClass:"align-middle"}),t._v(" "),i("strong",[t._v("加载中...")])],1)]},proxy:!0},{key:"cell(index)",fn:function(e){return[i("b-form-checkbox",{on:{change:function(i){return t.onRowSelected(e.item)}}},[t._v(" "+t._s(e.index+1)+" ")])]}},{key:"cell(actions)",fn:function(e){return[i("b-button",{staticClass:"mr-1",attrs:{size:"sm",name:"row.item.F_Id"},on:{click:function(i){return t.updataDefineButton(e.item,e.index,i.target)}}},[t._v("\n            修改\n          ")]),t._v(" "),i("b-button",{attrs:{size:"sm"},on:{click:function(i){return t.defineDetail(e.item,i.target)}}},[t._v("\n            详情\n          ")]),t._v(" "),i("b-button",{staticClass:"mr-1",attrs:{size:"sm",name:"row.item.T_Id"},on:{click:function(i){return t.deleteDefineButton(e.item)}}},[t._v("\n            删除\n          ")])]}}])}),t._v(" "),i("div",{staticClass:"myPage",attrs:{align:"center"}},[i("b-col",{staticClass:"my-1",attrs:{sm:"7",md:"6"}},[i("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1),t._v(" "),i("b-modal",{attrs:{id:t.defineModal.id,title:t.defineModal.title,scrollable:"",okTitle:"确定",cancelTitle:"取消","no-close-on-backdrop":!0,"no-close-on-esc":!0},on:{cancel:t.modalCancel,ok:t.modalOk},scopedSlots:t._u([{key:"modal-header",fn:function(e){return[i("h4",[t._v(t._s(t.defineModal.title))])]}}])},[t._v(" "),i("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},["修改夹具定义"!=this.defineModal.title?i("b-form-group",{attrs:{description:"",label:"夹具代码:","label-for":"code","invalid-feedback":t.invalidCode,"label-cols-sm":"3",state:t.codeState}},[i("b-form-input",{attrs:{id:"code",state:t.codeState,trim:""},model:{value:t.defineEntity.T_Code,callback:function(e){t.$set(t.defineEntity,"T_Code",e)},expression:"defineEntity.T_Code"}})],1):t._e(),t._v(" "),i("b-form-group",{attrs:{description:"",label:"夹具名称:","label-for":"name","label-cols-sm":"3","invalid-feedback":t.invalidName,state:t.nameState}},[i("b-form-input",{attrs:{id:"name",state:t.nameState,trim:""},model:{value:t.defineEntity.T_Name,callback:function(e){t.$set(t.defineEntity,"T_Name",e)},expression:"defineEntity.T_Name"}})],1),t._v(" "),i("b-form-group",{attrs:{label:"所属大类:","label-cols-sm":"3","label-for":"family",state:t.familyState,"invalid-feedback":t.invalidFamily}},[i("b-form-select",{attrs:{id:"family",state:t.familyState,options:t.familyList,trim:""},model:{value:t.T_Family,callback:function(e){t.T_Family=e},expression:"T_Family"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"夹具模组:",placeholder:"可多选","label-for":"model","label-cols-sm":"3",state:t.modelState,"invalid-feedback":t.invalidModel}},[i("b-form-select",{attrs:{id:"model",state:t.modelState,"select-size":4,multiple:"",options:t.modelListTemp,trim:""},model:{value:t.T_Model,callback:function(e){t.T_Model=e},expression:"T_Model"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",placeholder:"可多选",label:"夹具料号:","label-for":"partNo","label-cols-sm":"3",state:t.partNoState,"invalid-feedback":t.invalidPartNo}},[i("b-form-select",{attrs:{id:"partNo",state:t.partNoState,"select-size":4,multiple:"",options:t.partNoListTemp,trim:""},model:{value:t.T_PartNo,callback:function(e){t.T_PartNo=e},expression:"T_PartNo"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"配备数量:","label-for":"upl","label-cols-sm":"3",state:t.uplState,"invalid-feedback":t.invalidUpl}},[i("b-form-input",{attrs:{id:"upl",state:t.uplState,trim:""},model:{value:t.defineEntity.T_Upl,callback:function(e){t.$set(t.defineEntity,"T_Upl",e)},expression:"defineEntity.T_Upl"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"夹具用途:","label-for":"usedFor","label-cols-sm":"3",state:t.usedForState,"invalid-feedback":t.invalidUsedFor}},[i("b-form-input",{attrs:{id:"usedFor",state:t.usedForState,trim:""},model:{value:t.defineEntity.T_UsedFor,callback:function(e){t.$set(t.defineEntity,"T_UsedFor",e)},expression:"defineEntity.T_UsedFor"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"点验周期:","label-for":"pmPeriod","label-cols-sm":"3",state:t.pmState,"invalid-feedback":t.invalidPm}},[i("b-form-input",{attrs:{id:"pmPeriod",state:t.pmState,trim:""},model:{value:t.defineEntity.T_PmPeriod,callback:function(e){t.$set(t.defineEntity,"T_PmPeriod",e)},expression:"defineEntity.T_PmPeriod"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"责任人:","label-for":"ownerName","label-cols-sm":"3",state:t.OnameState,"invalid-feedback":t.invalidOname}},[i("b-form-input",{attrs:{id:"ownerName",state:t.OnameState,trim:""},model:{value:t.defineEntity.T_OwnerName,callback:function(e){t.$set(t.defineEntity,"T_OwnerName",e)},expression:"defineEntity.T_OwnerName"}})],1)],1)]),t._v(" "),i("b-modal",{attrs:{id:t.defineModalD.id,title:"夹具定义详情:",scrollable:"","hide-footer":""}},[i("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[i("b-form-group",{attrs:{description:"",label:"夹具代码:","label-for":"code","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"code",trim:""},model:{value:t.defineEntity.T_Code,callback:function(e){t.$set(t.defineEntity,"T_Code",e)},expression:"defineEntity.T_Code"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"夹具名称:","label-for":"name","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"name",trim:""},model:{value:t.defineEntity.T_Name,callback:function(e){t.$set(t.defineEntity,"T_Name",e)},expression:"defineEntity.T_Name"}})],1),t._v(" "),i("b-form-group",{attrs:{label:"所属大类:","label-cols-sm":"3","label-for":"family"}},[i("b-form-input",{attrs:{id:"family",trim:""},model:{value:t.defineEntity.T_Family,callback:function(e){t.$set(t.defineEntity,"T_Family",e)},expression:"defineEntity.T_Family"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"夹具模组:","label-for":"model","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"model",trim:""},model:{value:t.defineEntity.T_Model,callback:function(e){t.$set(t.defineEntity,"T_Model",e)},expression:"defineEntity.T_Model"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"夹具料号:","label-for":"partNo","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"partNo",trim:""},model:{value:t.defineEntity.T_PartNo,callback:function(e){t.$set(t.defineEntity,"T_PartNo",e)},expression:"defineEntity.T_PartNo"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"配备数量:","label-for":"upl","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"upl",trim:""},model:{value:t.defineEntity.T_Upl,callback:function(e){t.$set(t.defineEntity,"T_Upl",e)},expression:"defineEntity.T_Upl"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"夹具用途:","label-for":"usedFor","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"usedFor",trim:""},model:{value:t.defineEntity.T_UsedFor,callback:function(e){t.$set(t.defineEntity,"T_UsedFor",e)},expression:"defineEntity.T_UsedFor"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"点验周期:","label-for":"pmPeriod","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"pmPeriod",trim:""},model:{value:t.defineEntity.T_PmPeriod,callback:function(e){t.$set(t.defineEntity,"T_PmPeriod",e)},expression:"defineEntity.T_PmPeriod"}})],1),t._v(" "),i("b-form-group",{attrs:{description:"",label:"责任人:","label-for":"ownerName","label-cols-sm":"3"}},[i("b-form-input",{attrs:{id:"ownerName",trim:""},model:{value:t.defineEntity.T_OwnerName,callback:function(e){t.$set(t.defineEntity,"T_OwnerName",e)},expression:"defineEntity.T_OwnerName"}})],1)],1)])],1),t._v(" "),i("el-backtop",{attrs:{target:""}})],1)},n=[],l=(i("28a5"),i("5df3"),i("f400"),i("ac4d"),i("8a81"),i("ac6a"),i("b775"));function o(t){return Object(l["a"])({url:"/ToolManage/Define/GetGridJson",method:"get",params:t})}function s(){return Object(l["a"])({url:"/ToolManage/Family/Get",method:"get"})}function r(t){return Object(l["a"])({url:"/ToolManage/Define/getFormByCode",method:"get",params:{code:t}})}function d(t){return Object(l["a"])({url:"/ToolManage/Define/Insert",method:"post",data:t})}function u(t){return Object(l["a"])({url:"/ToolManage/Define/Update",method:"post",data:t})}function c(t){return Object(l["a"])({url:"/ToolManage/Define/Delete",method:"post",params:{keyValue:t}})}function m(t){return Object(l["a"])({url:"/ToolManage/Define/BatchDeleteForm",method:"post",data:t})}var f=i("5c96"),p={data:function(){return{items:[],itemsBackUp:[],fieldsName:null,codeStateFlag:null,nameStateFlag:null,familyStateFlag:null,modelStateFlag:null,partNoStateFlag:null,uplStateFlag:null,usedForStateFlag:null,pmStateFlag:null,OnameStateFlag:null,T_Family:"",T_Model:"",T_PartNo:"",defineEntity:{T_Code:null,T_Name:"",T_Model:null,T_PartNo:null,T_Family:null,T_Upl:null,T_UsedFor:null,T_PmPeriod:null,T_OwnerName:null,T_CreatorTime:null,T_RecPerson:null,T_EditedTime:"",T_Editer:null,T_DepartmentId:null},submitFormFlag:null,groupState:null,searchFlag:!1,totalRows:1,currentPage:1,perPage:10,pageOptions:[5,10,15,20,30],sortBy:null,sortDesc:!1,sortDirection:"asc",spinFlag:!0,fields:[{key:"index",label:"序号"},{key:"T_Code",label:"夹具代码",sortable:!0,sortDirection:"desc"},{key:"T_Name",label:"夹具名称",sortable:!0,class:"text-center"},{key:"T_Family",label:"所属大类",sortable:!0},{key:"T_Model",label:"夹具模组",sortable:!0},{key:"T_PartNo",label:"夹具料号",sortable:!0,class:"text-center"},{key:"T_Upl",label:"配备数量",sortable:!0},{key:"T_UsedFor",label:"夹具用途",sortable:!0},{key:"T_PmPeriod",label:"点检周期",sortable:!0},{key:"actions",label:"操作"}],filter:null,filterOn:[],striped:!0,bordered:!0,defineModal:{id:"info-modal",title:"",content:""},defineModalD:{id:"infoD-modal",title:"",content:""},pagination:{sord:"desc",page:1,rows:10,sidx:"T_Name",keyword:null},T_FMPList:null,familyList:[],modelList:[],modelListTemp:[],partNoListTemp:[],partNoList:[],familyMap:null,mapFamily:null,mapModel:null,modelMap:null,mapPartNo:null,partNoMap:null}},watch:{T_Family:function(){this.modelListTemp=[];var t=!0,e=!1,i=void 0;try{for(var a,n=this.T_FMPList[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var l=a.value,o={text:null,value:null};l.T_ParentId==this.T_Family&&(o.text=l.T_Name,o.value=l.T_Id,this.modelListTemp.push(o))}}catch(s){e=!0,i=s}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}},T_Model:function(){if(this.partNoListTemp=[],null!=this.T_Model&&""!=this.T_Model)for(var t=0;t<this.T_Model.length;t++){var e=!0,i=!1,a=void 0;try{for(var n,l=this.T_FMPList[Symbol.iterator]();!(e=(n=l.next()).done);e=!0){var o=n.value,s={text:null,value:null};o.T_ParentId==this.T_Model[t]&&(s.text=o.T_Name,s.value=o.Id,this.partNoListTemp.push(s))}}catch(r){i=!0,a=r}finally{try{e||null==l.return||l.return()}finally{if(i)throw a}}}},T_PartNo:function(){console.log(JSON.stringify(this.T_PartNo+"  :  :  "))},perPage:function(){this.pagination.rows=this.perPage,this.getList()},currentPage:function(){this.pagination.page=this.currentPage,this.getList()},sortBy:function(){this.pagination.sidx=this.sortBy,this.getList(),Object(f["Message"])({message:"查询根据"+this.sortBy+"排序！",type:"success",duration:5e3})},sortDesc:function(){0==this.sortDesc?this.pagination.sord="asc":this.pagination.sord="desc",this.getList(),Object(f["Message"])({message:"查询根据"+this.sortBy+"的"+this.pagination.sord+"排序！",type:"success",duration:5e3})}},created:function(){this.getFamilyList(),this.setFieldsName(),this.getList()},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))},codeState:function(){var t=/^[a-zA-Z0-9_-]{4,16}$/;return this.codeStateFlag=t.test(this.defineEntity.T_Code),this.codeStateFlag},nameState:function(){return this.nameStateFlag=""!=this.defineEntity.T_Name,this.nameStateFlag},invalidName:function(){return this.nameStateFlag?"":"请输入夹具名称"},familyState:function(){return""!=this.T_Family?this.familyStateFlag=!0:this.familyStateFlag=!1,this.familyStateFlag},invalidFamily:function(){return this.familyStateFlag?"":"请选择夹具所属大类"},modelState:function(){return""!=this.T_Model?this.modelStateFlag=!0:this.modelStateFlag=!1,this.modelStateFlag},invalidModel:function(){return this.modelStateFlag?"":"请选择夹具模组"},partNoState:function(){return""!=this.T_PartNo?this.partNoStateFlag=!0:this.partNoStateFlag=!1,this.partNoStateFlag},uplState:function(){return""!=this.defineEntity.T_Upl?this.uplStateFlag=!0:this.uplStateFlag=!1,this.uplStateFlag},invalidUpl:function(){return this.uplStateFlag?"":"请输入配备数量"},usedForState:function(){return""!=this.defineEntity.T_UsedFor?this.usedForStateFlag=!0:this.usedForStateFlag=!1,this.usedForStateFlag},invalidUsedFor:function(){return this.usedForStateFlag?"":"请输入夹具用途"},invalidPartNo:function(){return this.partNoStateFlag?"":"请选择夹具料号"},pmState:function(){return""!=this.defineEntity.T_PmPeriod?this.pmStateFlag=!0:this.pmStateFlag=!1,this.pmStateFlag},invalidPm:function(){return this.pmStateFlag?"":"请输入点检周期"},OnameState:function(){return""!=this.defineEntity.T_OwnerName?this.OnameStateFlag=!0:this.OnameStateFlag=!1,this.OnameStateFlag},invalidOname:function(){return this.OnameStateFlag?"":"请输入责任人"},invalidCode:function(){return this.codeStateFlag?"":"4到16位(数字,字母,下划线,减号)"}},mounted:function(){},methods:{defineDetail:function(t,e){this.defineEntity=JSON.parse(JSON.stringify(t)),this.$root.$emit("bv::show::modal",this.defineModalD.id,e)},getFamilyList:function(){var t=this;s().then((function(e){t.mapFamily=new Map,t.familyMap=new Map,t.mapModel=new Map,t.modelMap=new Map,t.partNoMap=new Map,t.mapPartNo=new Map;var i=new Map,a=new Map,n=new Map,l=new Map,o=new Map,s=new Map;t.T_FMPList=e;var r=!0,d=!1,u=void 0;try{for(var c,m=e[Symbol.iterator]();!(r=(c=m.next()).done);r=!0){var f=c.value,p={text:null,value:null};1==f.T_IsFamily&&(p.text=f.T_Name,p.value=f.T_Id,i.set(f.T_Id,f.T_Name),a.set(f.T_Name,f.T_Id),t.familyList.push(p))}}catch(w){d=!0,u=w}finally{try{r||null==m.return||m.return()}finally{if(d)throw u}}t.mapFamily=a,t.familyMap=i;var b=!0,h=!1,y=void 0;try{for(var _,g=e[Symbol.iterator]();!(b=(_=g.next()).done);b=!0){var T=_.value,v={text:null,value:null};1==T.T_IsModel&&(v.text=T.T_Name,v.value=T.T_Id,n.set(T.T_Id,T.T_Name),l.set(T.T_Name,T.T_Id),t.modelList.push(v))}}catch(w){h=!0,y=w}finally{try{b||null==g.return||g.return()}finally{if(h)throw y}}t.mapModel=l,t.modelMap=n;var F=!0,S=!1,M=void 0;try{for(var N,E=e[Symbol.iterator]();!(F=(N=E.next()).done);F=!0){var k=N.value,P={text:null,value:null};1==k.T_IsPartNo&&(P.text=k.T_Name,P.value=k.T_Id,o.set(k.T_Id,k.T_Name),s.set(k.T_Name,k.T_Id),t.partNoList.push(P))}}catch(w){S=!0,M=w}finally{try{F||null==E.return||E.return()}finally{if(S)throw M}}t.mapPartNo=s,t.partNoMap=o}))},handleSubmit:function(){return this.defineModal.title,!!(this.codeStateFlag&&this.nameStateFlag&&this.familyStateFlag&&this.pmStateFlag&&this.OnameStateFlag&&this.modelStateFlag&&this.partNoStateFlag&&this.uplStateFlag&&this.OnameStateFlag)||void 0},onRowSelected:function(t){var e=this.itemsSelected.indexOf(t.T_Id);-1==e?this.itemsSelected.push(t.T_Id):this.itemsSelected.splice(e,1)},clearKeyWord:function(){this.pagination.keyword=null,this.searchFlag=!1},refresh:function(){this.itemsSelected=[],this.getList()},userSearch:function(){this.searchFlag=!0,""!=this.pagination.keyword&&null!=this.pagination.keyword?this.getList():(this.searchFlag=!1,Object(f["Message"])({message:"搜索字段不能为空！",type:"warning",duration:5e3}))},insertDefineButton:function(t){this.defineEntity.T_Code="",this.defineEntity.T_Name="",this.defineEntity.T_Model=null,this.T_Family="",this.T_Model="",this.T_PartNo="",this.defineEntity.T_PartNo=null,this.defineEntity.T_Family=null,this.defineEntity.T_Upl="",this.defineEntity.T_UsedFor="",this.defineEntity.T_PmPeriod="",this.defineEntity.T_OwnerName="",this.defineEntity.T_CreatorTime=null,this.defineEntity.T_RecPerson=null,this.defineEntity.T_EditedTime=null,this.defineEntity.T_Editer=null,this.defineModal.title="新建夹具定义",this.$root.$emit("bv::show::modal",this.defineModal.id,t)},updataDefineButton:function(t,e,i){this.T_Family=this.mapFamily.get(t.T_Family),this.T_Model=[];for(var a=t.T_Model.split(" "),n=0;n<a.length;n++)this.T_Model.push(this.mapModel.get(a[n]));this.T_PartNo=[];var l=t.T_PartNo.split(" ");for(n=0;n<l.length;n++)this.T_PartNo.push(l[n]);this.defineModal.title="修改夹具定义",this.defineEntity=JSON.parse(JSON.stringify(t)),console.log("修改夹具定义"),this.$root.$emit("bv::show::modal",this.defineModal.id,i)},deleteDefineButton:function(t){var e="此操作将永久删除该定义, 是否继续?",i="deleteone";this.showMsgBox(e,t,i)},insertDefine:function(){var t=this;r(this.defineEntity.T_Code).then((function(e){if(null!=e)Object(f["Message"])({message:"夹具代码已存在,请检查是否出错！",type:"warning",duration:5e3});else{t.defineEntity.T_Family=t.familyMap.get(t.T_Family);for(var i="",a=0;a<t.T_Model.length;a++)i=t.modelMap.get(t.T_Model[a])+" "+i;t.defineEntity.T_Model=i;var n="";for(a=0;a<t.T_PartNo.length;a++)n=t.T_PartNo[a]+" "+n;t.defineEntity.T_PartNo=n;var l={defineEntity:null};l.defineEntity=t.defineEntity,d(l).then((function(e){1==e?(t.$nextTick((function(){t.$bvModal.hide(t.defineModal.id)})),t.refresh(),Object(f["Message"])({message:"操作成功！",type:"success",duration:5e3})):Object(f["Message"])({message:"操作失败！",type:"warning",duration:5e3})}))}}))},updateDefine:function(){var t=this,e={defineEntity:null,keyValue:null};e.defineEntity=this.defineEntity,e.keyValue=this.defineEntity.T_Code,u(e).then((function(e){1==e?(t.$nextTick((function(){t.$bvModal.hide(t.defineModal.id)})),t.refresh(),Object(f["Message"])({message:"操作成功！",type:"success",duration:5e3})):Object(f["Message"])({message:"操作失败！",type:"warning",duration:5e3})}))},deleteDefines:function(){var t=this;m(this.itemsSelected).then((function(e){"success"==e.state&&(t.refresh(),t.itemsSelected=[],Object(f["Message"])({message:e.message,type:"success",duration:5e3}))}))},deleteDefine:function(t){var e=this;console.log(t),c(t.T_Id).then((function(t){"success"==t.state&&(e.refresh(),Object(f["Message"])({message:t.message,type:"success",duration:5e3}))}))},modalCancel:function(){},modalOk:function(t){t.preventDefault(),this.handleSubmit()&&("修改夹具定义"==this.defineModal.title?this.showMsgBox("请确认是否修改此夹具定义！"):this.showMsgBox("请确认是否添加此夹具定义！"))},showMsgBox:function(t,e,i){var a=this;this.$bvModal.msgBoxConfirm(t,{title:"提示",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"确定",cancelTitle:"取消",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(t){1==t&&("deleteone"==i?a.deleteDefine(e):"batchDelete"==i?a.deleteDefines():"新建夹具定义"==a.defineModal.title?a.insertDefine():a.updateDefine())})).catch((function(t){}))},setFieldsName:function(){this.fieldsName=new Map([["T_Code","夹具代码"],["T_Name","夹具名称"],["T_Model","夹具模组"],["T_PartNo","夹具料号"],["T_Upl","需要配备数量"],["T_UsedFor","用途"],["T_PmPeriod","保养点检周期"],["T_OwnerName","责任人"],["T_CreatorTime","录入日期"],["T_RecPerson","录入人"],["T_EditedTime","修改日期"],["T_Editer","修改人"]])},getList:function(){var t=this;this.itemsSelected=[],this.items=null;var e=null;this.spinFlag=!0,o(this.pagination).then((function(i){e=i.rows,t.itemsBackUp=i.rows,t.totalRows=i.records,t.spinFlag=!1,t.items=e}))},info:function(t,e,i){this.infoModal.title="Row index: ".concat(e),this.infoModal.content=JSON.stringify(t,null,2),this.$root.$emit("bv::show::modal",this.infoModal.id,i)},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""}}},b=p,h=(i("4e8f"),i("2877")),y=Object(h["a"])(b,a,n,!1,null,"04e6be18",null);e["default"]=y.exports},e1ff:function(t,e,i){},f400:function(t,e,i){"use strict";var a=i("c26b"),n=i("b39a"),l="Map";t.exports=i("e0b8")(l,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=a.getEntry(n(this,l),t);return e&&e.v},set:function(t,e){return a.def(n(this,l),0===t?0:t,e)}},a,!0)}}]);